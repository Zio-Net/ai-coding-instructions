---
description: Best practices for React development, focusing on React Query, TypeScript, functional components, and clean architecture.
globs: **/*.tsx, **/*.ts
alwaysApply: false
---

# React Development Guidelines

## Component Architecture
- **Functional Components**: Use functional components with hooks. Avoid class components.
- **Separation of Concerns**:
  - **Presentational Components**: Focus on UI rendering. Pure and stateless where possible.
  - **Container/Page Components**: Handle data fetching and state orchestration.
- **Custom Hooks**: Extract reusable logic into custom hooks (e.g., `useAuth`, `useTheme`).
- **File Structure**: Group related components, styles, and tests (e.g., `components/Button/`).

## State Management & Data Fetching
- **React Query (TanStack Query)**: Prefer React Query for server state management (fetching, caching, synchronizing, and updating server state).
  - Use `useQuery` for fetching data.
  - Use `useMutation` for creating/updating/deleting data.
  - Create custom hooks for queries (e.g., `useUserQuery`) to centralize keys and fetcher functions.
- **Local State**: Use `useState` for simple component-local state.
- **Complex State**: Use `useReducer` for complex state logic involving multiple sub-values.

## TypeScript Usage
- **Strict Typing**: Avoid `any`. Use specific types or generics.
- **Props**: Define props interfaces/types for all components (e.g., `ButtonProps`).
- **Event Handlers**: Use proper React event types (e.g., `React.ChangeEvent<HTMLInputElement>`).
- **Imports**: Use explicit type imports (`import type { User } from './types'`).

## Performance
- **Memoization**: Use `useMemo` for expensive calculations and `useCallback` for functions passed as props to optimized child components. Avoid premature optimization.
- **Code Splitting**: Use `React.lazy` and `Suspense` for route-based or component-based code splitting.
- **Stable Keys**: Always use stable, unique IDs for list keys (avoid using index).

## Styling
- **CSS Modules/Styled Components/Tailwind**: Stick to the project's chosen styling strategy. Avoid inline styles for dynamic values.
- **Responsiveness**: Design mobile-first.

## Testing
- **Unit & Integration**: Use **React Testing Library** to test component behavior (what the user sees), not implementation details.
- **End-to-End (E2E)**: Critical user flows must be tested with E2E tools (e.g., Playwright/Cypress depending on the project).
- **Mocking**: When unit testing, mock network requests to avoid real API calls.
